$_base-font-size-px: 16px !default;
$_between-lines: (1rem / 2.6) !default;

$color-accent: #cd162c !default;

@import '../../node_modules/sass-basis/src/css/basis-core';

@mixin container-padding() {
  padding-right: $_container-margin;
  padding-left: $_container-margin;

  padding-right: calc(#{ _var-container-margin-sm() } + constant(safe-area-inset-right));
  padding-left: calc(#{ _var-container-margin-sm() } + constant(safe-area-inset-left));

  padding-right: calc(#{ _var-container-margin-sm() } + env(safe-area-inset-right));
  padding-left: calc(#{ _var-container-margin-sm() } + env(safe-area-inset-left));

  @supports (-ms-ime-align: auto) {
    padding-right: #{ _var-container-margin-sm() }; // for Edge
    padding-left: #{ _var-container-margin-sm() }; // for Edge
  }

  @include _media-min(md) {
    padding-right: $_container-margin * 2;
    padding-left: $_container-margin * 2;

    padding-right: calc(#{ _var-container-margin() } + constant(safe-area-inset-right));
    padding-left: calc(#{ _var-container-margin() } + constant(safe-area-inset-left));

    padding-right: calc(#{ _var-container-margin() } + env(safe-area-inset-right));
    padding-left: calc(#{ _var-container-margin() } + env(safe-area-inset-left));

    @supports (-ms-ime-align: auto) {
      padding-right: #{ _var-container-margin-sm() }; // for Edge
      padding-left: #{ _var-container-margin-sm() }; // for Edge
    }
  }
}

.l-header:not(.l-header--left) {
  position: relative;

  .snow-monkey-mega-menu {
    position: static;
  }
}

.l-header--left {
  .snow-monkey-mega-menu {
    > .c-navbar__submenu {
      @include _media-min(lg) {
        $body-margin-left: 280px; // for IE
        --body-margin-left: #{ $body-margin-left };
        width: calc(100vw - #{ $body-margin-left });
        width: calc(100vw - var(--body-margin-left, #{ $body-margin-left }));
        max-width: none;
        max-height: 100vh;
        overflow: auto;

        &::before {
          margin: 0;
        }
      }
    }
  }
}

.snow-monkey-mega-menu {
  &[aria-haspopup="true"] {
    &::before {
      display: none !important;
    }

    > a {
      position: relative;

      &::before {
        content: '';
        display: block;
        @include _triangle-top(16px, 10px, var(--accent-color, $color-accent));
        position: absolute;
        bottom: -0;
        left: calc(50% - 8px);
        visibility: hidden;
        opacity: 0;
        @include _transition(opacity);
      }
    }

    @include _hover(lg) {
      > a {
        &::before {
          visibility: visible;
          opacity: 1;
        }
      }
    }
  }

  .c-navbar__submenu {
    background-color: transparent;
  }

  > .c-navbar__submenu {
    background-color: var(--accent-color, $color-accent);
    width: 100%;
    max-width: 1280px;

    &::after {
      content: '';
      position: absolute;
      top: -1.5rem;
      right: 0;
      bottom: 0;
      left: 0;
      z-index: -1;
    }
  }
}

@import 'mega-menu-1';
@import 'mega-menu-2';
@import 'mega-menu-3';
@import 'mega-menu-4';
